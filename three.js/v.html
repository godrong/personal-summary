<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>monkey </title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
<script>
	function Monkey (name,maxBanana,_pos,step,remain) {
			this.name = name;
			this.maxBanana = maxBanana;
			this._pos =_pos;
			this.step =step;
			this.remain =remain;
		}
	Monkey.prototype= {
		constructor:Monkey,
		left:function() {
			if(this.remain<=0){
				console.log('没有食物了'+ this.name+ '停止运动,当前位置：'+ this._pos)
				return
			}
			this._pos--,
			this.remain--,
			this.step--
		},
		right:function() {
			if(this.remain<=0){
				console.log('没有食物了'+ this.name+ '停止运动,当前位置：'+ this._pos)
				return
			}
			this._pos++,
			this.remain--,
			this.step++
			
		},
		getRemain:function() {
			console.log(this.remain)
			return this.remain 
		},
		getPos:function() {
			// console.log(this._pos)
			return this._pos  
		}
	} 
	var hasBanana = 120,maxBanana = 50,dis = 50
	var swk = new Monkey('孙悟空',maxBanana,0,0,hasBanana) 
	var carryBanana = function (remain = swk.getRemain()) {
		if(swk.getPos()>=dis) {
			console.log('剩余：'+swk.getRemain()+'位置：'+swk.getPos())
			console.log('到家了')
			return
		}
		if(remain>dis) { // 分多次搬运
			var n =  Math.ceil((remain - maxBanana)/ dis),y=0    //向上取整
			if(n<3) {
				n= 3
				y = (remain-maxBanana) /n
				// swk.backForth(n,y)
			}else if(n%2===0) {
				n+=3
				y = (remain-maxBanana) /n
			}else if(n%2>0){
				n+=2
				y = (remain-maxBanana) /n
			}
			console.log('折返跑次数n:'+n,'折返跑距离=剩余香蕉='+y)

			// carryBanana(dis)
		}
		else if (remain <=dis) {
			var _pos = swk.getPos()
			for(let i=0;i<dis-_pos-1;i++){
				swk.right()
				console.log('剩余：'+swk.getRemain()+'位置：'+swk.getPos())
			}
		}
		
	}
	carryBanana()

</script>
	</body>
</html>